var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(n,a){function s(t){try{l(o.next(t))}catch(e){a(e)}}function h(t){try{l(o["throw"](t))}catch(e){a(e)}}function l(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(s,h)}l((o=o.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return o([t,e])}}function o(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(s=a[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(a,i[1])).done)return s;switch(a=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){l.label=i[1];break}if(6===i[0]&&l.label<s[1]){l.label=s[1],s=i;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(i);break}s[2]&&l.ops.pop(),l.trys.pop();continue}i=e.call(t,l)}catch(o){i=[6,o],a=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,a,s,h,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return h={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h},LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.scale=.7,e.count=0,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.createView,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.gc,e),e}return __extends(e,t),e.prototype.createView=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.createView,this);var t=this.stage.stageWidth,e=this.stage.stageHeight;this.textField=new egret.TextField,this.textField.width=t,this.textField.height=30,this.textField.textAlign="center",this.textField.textColor=16777215,this.textField.size=20;var i=RES.getRes("loadingMc_json"),o=RES.getRes("loadingMc_png"),n=new egret.MovieClipDataFactory(i,o),a=new egret.MovieClip(n.generateMovieClipData("McLoad"));a.frameRate=60,a.gotoAndPlay(1,-1),a.x=t-a.width+250,util.setScale(a,this.scale,this.scale),this.addChild(a);var s=this.createBitmapByName("proBg_png");s.x=.5*t-.5*a.width*this.scale,s.y=.5*e-.5*a.height+150,this.addChild(s),util.setScale(s,this.scale,this.scale),util.setCneter(this.textField),util.setScale(this.textField,this.scale,this.scale),this.textField.x=.5*t,this.textField.y=s.y+18,a.y=s.y-150,this.loadAnimateCon=new egret.DisplayObjectContainer;for(var h=3,l=35,r=15,c=100,g=Math.ceil(t/r)+2*h,d=0;g>d;d++){var p=new egret.Shape,u=void 0;u=d%2?16628020:16762713,p.graphics.beginFill(u,1),p.graphics.drawRect(0,0,r,c),p.graphics.endFill(),p.rotation=l,p.x=(d-h)*(r/Math.cos(l*Math.PI/180)),this.loadAnimateCon.addChild(p)}this.addChild(this.loadAnimateCon),this.loadAnimateCon.y=s.y-25;var m=this.createBitmapByName("proBg_png");s.x=.5*t-.5*a.width*this.scale,m.x=.5*t-.5*a.width,m.y=.5*e-.5*a.height+200,m.y=s.y,m.x=s.x,this.maskCon=m,this.maskCon.width=0,this.addChild(m),util.setScale(m,this.scale,this.scale),this.loadAnimateCon.mask=m;var v=new egret.Rectangle(25,25,530,4);m.scale9Grid=v,this.addEventListener(egret.Event.ENTER_FRAME,this.Update,this),this.addChild(this.textField);var b=new egret.TextField;b.y=s.y+100,b.width=t,b.height=40,b.text="加载中…",b.textAlign="center",b.textColor=12434366,b.size=24,this.addChild(b)},e.prototype.Update=function(t){for(var e=this.loadAnimateCon.getChildAt(0),i=this.loadAnimateCon.getChildAt(0),o=0;o<this.loadAnimateCon.numChildren;o++){var n=this.loadAnimateCon.getChildAt(o);n.x+=5,n.x<e.x&&(e=n),n.x>i.x&&(i=n)}e.x>-5&&(i.x=e.x-15/Math.cos(35*Math.PI/180))},e.prototype.onProgress=function(t,e){var i=Math.round(t/e*100);this.textField&&(this.textField.text=""+i+"%"),this.maskCon&&(this.maskCon.width=582*(1/e),this.maskCon.width<55&&(this.maskCon.width=55))},e.prototype.gc=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.Update,this)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){var e=t.call(this)||this;return e.scale=.8,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResourceLoading()];case 1:return t.sent(),this.createGameSceneLoading(),[4,this.loadResource()];case 2:return t.sent(),this.createGameScene(),[2]}})})},e.prototype.createGameSceneLoading=function(){},e.prototype.loadResourceLoading=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,RES.loadConfig("resource/loading.json","")];case 1:return e.sent(),[4,RES.loadGroup("preloadLoading",0,null)];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),console.error(t),[3,4];case 4:return[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return i.sent(),this.stage.removeChild(t),[3,4];case 3:return e=i.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.createGameScene=function(){this.stageW=this.stage.stageWidth,this.stageH=this.stage.stageHeight;var t=util.createBitmapByName("bg"+Global.level+"_png");this.addChild(t),t.width=this.stageW,t.height=this.stageH;var e=util.createDragonBonAnimate("raccoonFront","Armature","newAnimation",.007);this.reccoonDragonbonFront=e,e.display.x=.5*this.stageW,e.display.y=.5*this.stageH-50,e.display.scaleX=e.display.scaleY=.4,this.addChild(e.display),e.addEventListener(dragonBones.AnimationEvent.START,this.startPlayDragonbon,this),e.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.loopCompleteDragonbon,this),util.setScale(e.display,.4*this.scale,.4*this.scale);var i=130,o=20,n=new egret.MovieClip(util.createFrameAnimate("soundMc").generateMovieClipData("soundMc"));n.frameRate=3,n.gotoAndStop(1);var a=this.scale;util.setScale(n,a,a),util.setPosition(n,o,i),Global.soundMc=n;var s=util.createBitmapByName("skipBtn_png");util.setWidth(s,150),s.touchEnabled=!0,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.skipFun,this),s.visible=!1,Global.skipBtn=s,util.setScale(s,a,a),util.setPosition(s,this.stageW-s.width-o,i);var h=util.createBitmapByName("replayBtn_png");this.replayBtn=h,util.setWidth(h,360),util.setScale(h,this.scale,this.scale),util.setCneter(h),util.setPosition(h,.5*this.stageW,this.stageH-200),h.touchEnabled=!0,h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.replayFun,this),h.visible=!1;var l=util.createBitmapByName("mask_png");this.maskBg=l,l.width=this.stageW,l.height=this.stageH,l.x=.5*this.stageW,l.y=.5*this.stageH,l.anchorOffsetX=.5*this.stageW,l.anchorOffsetY=.5*this.stageH,this.addChild(l);var r=util.createBitmapByName("maskRaccoon_png");r.width=this.stageW,r.height=this.stageH,r.x=.5*this.stageW,r.y=.5*this.stageH,r.anchorOffsetX=.5*this.stageW,r.anchorOffsetY=.5*this.stageH,this.maskStartFun=function(t){var e=this;0!=this.item.itemCount&&(this.tipText.visible=!1),this.addChild(r);var i=egret.Tween.get(r,{loop:!1});i.call(function(){e.addChild(r),l.visible=!1},this),i.to({scaleX:16,scaleY:10},500),i.call(function(){e.contains(r)&&(e.removeChild(r),r.x=.5*e.stageW,r.y=.5*e.stageH,r.scaleX=1,r.scaleY=1,l.visible=!1),t()},this)},this.playBtn=util.createBitmapByName("playBtn_png"),util.setWidth(this.playBtn,190),util.setCneter(this.playBtn),util.setScale(this.playBtn,this.scale,this.scale),this.playBtn.x=.5*this.stageW,this.playBtn.y=.5*this.stageH,this.playBtn.touchEnabled=!0,this.playBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startFun,this),this.playBtnBg=new egret.Shape,this.playBtnBg.graphics.beginFill(16777215,.7),this.playBtnBg.graphics.drawCircle(0,0,.5*this.playBtn.width*this.scale),this.playBtnBg.graphics.endFill(),this.playBtnBg.x=.5*this.stageW,this.playBtnBg.y=.5*this.stageH,this.addChild(this.playBtnBg),this.addChild(this.playBtn),this.addChild(h);var c=egret.Tween.get(this.playBtnBg,{loop:!0});c.to({alpha:0,scaleX:.8,scaleY:.8},0),c.to({alpha:.8,scaleX:1,scaleY:1},500),c.to({alpha:1,scaleX:1,scaleY:1},500),c.to({alpha:0,scaleX:.8,scaleY:.8},500);var g=util.createDragonBonAnimate("hand","Armature","正常手",null);this.handerDragonBones=g,util.setPosition(g.display,.5*this.stageW+20,.5*this.stageH+180),this.addChild(g.display),util.setScale(g.display,this.scale,this.scale),g.addEventListener(dragonBones.AnimationEvent.START,this.startPlayDragonbonHand,this),g.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.loopCompleteDragonbonHand,this),g.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,this.frame_event_hand,this),g.animation.gotoAndPlay("正常手",0,0,-1),this.item=new Item,this.item.visible=!1;var d=this;Global.startFun=function(){g.animation.gotoAndPlay("正常手",0,0,-1),d.playBtnBg.visible=!0,d.playBtn.visible=!0},this.tipText=new egret.TextField,this.tipText.width=this.stageW,this.tipText.height=30,this.tipText.textAlign="center",this.tipText.textColor=16777215,this.tipText.size=26,this.tipText.text="点击之后没有声音？请尝试调大音量！",this.addChild(this.tipText),this.tipText.y=this.stageW+150,this.addChild(this.item),this.addChild(s),this.addChild(n)},e.prototype.startPlayDragonbonHand=function(t){},e.prototype.loopCompleteDragonbonHand=function(t){return},e.prototype.frame_event_hand=function(t){},e.prototype.startPlayDragonbon=function(t){},e.prototype.loopCompleteDragonbon=function(t){this.cloudsAnimate()},e.prototype.cloudsAnimate=function(){var t=this,e=new egret.DisplayObjectContainer;this.cloudsCon=e;var i=util.createBitmapByName("cloud_png"),o=util.createBitmapByName("cloud_png"),n=util.createBitmapByName("cloud_png"),a=util.createBitmapByName("cloud_png"),s=util.createBitmapByName("cloud_png"),h=util.createBitmapByName("cloud_png");e.addChild(i),e.addChild(o),e.addChild(n),e.addChild(a),e.addChild(s),e.addChild(h),s.alpha=.5,a.alpha=.5,n.alpha=.5,o.alpha=.5,i.alpha=.5,h.alpha=.5,e.x=-50,this.addChild(e),e.scaleX=e.scaleY=.1,o.x=400,o.y=-50,n.x=230,n.y=250,a.x=0,a.y=350,s.x=500,s.y=350,h.x=250,h.y=550,e.anchorOffsetX=.5*e.width*.5+100,e.anchorOffsetY=.5*e.height*.5+100,e.x=.5*this.stageW-10,e.y=.5*this.stageH;var l=egret.Tween.get(e,{loop:!1});l.to({scaleX:2.5,scaleY:2.5},1e3),l.call(function(){t.item.visible=!0});var r=egret.Tween.get(i,{loop:!1});r.to({alpha:1},1e3),r.wait(800),r.to({x:i.x-100,alpha:0},700);var c=egret.Tween.get(o,{loop:!1});c.to({alpha:1},1e3),c.wait(800),c.to({x:o.x+100,alpha:0},700);var g=egret.Tween.get(n,{loop:!1});g.to({alpha:1},1e3),g.wait(800),g.to({x:n.x+100,alpha:0},700);var d=egret.Tween.get(a,{loop:!1});d.to({alpha:1},1e3),d.wait(800),d.to({x:a.x-100,alpha:0},700);var p=egret.Tween.get(s,{loop:!1});p.to({alpha:1},1e3),p.wait(800),p.to({x:s.x+100,alpha:0},700);var u=egret.Tween.get(h,{loop:!1});u.to({alpha:1},1e3),u.wait(800),u.to({x:h.x+100,alpha:0},700),u.wait(1e3),u.call(function(){return t.replayBtn.visible=!0,0!=t.item.itemCount?(t.item.itemCount=2,t.item.createItem(),t.handerDragonBones.display.visible=!0,t.reccoonDragonbonFront.animation.gotoAndStop("newAnimation"),void(t.maskBg.visible=!0)):(t.item.createItem(),t.handerDragonBones.display.visible=!0,t.reccoonDragonbonFront.animation.gotoAndStop("newAnimation"),t.maskBg.visible=!0,void 0)},this)},e.prototype.skipFun=function(){this.item.visible=!1,Global.soundChannel&&Global.soundChannel.stop(),this.item.itemCount=3,this.item.gc(),Global.startFun(),Global.skipBtn.visible=!1,util.playSound("9_mp3",function(){})},e.prototype.replayFun=function(){this.replayBtn.visible&&(this.item.itemCount=1,this.item.visible=!0,this.playBtnBg.visible=!1,this.handerDragonBones.animation.stop(),this.item.createItem())},e.prototype.startFun=function(){var t=this;if(this.playBtn.visible)if(this.tipText.visible=!1,this.playBtnBg.visible=!1,this.handerDragonBones.animation.stop(),this.playBtn.visible=!1,this.handerDragonBones.display.visible=!1,0!=this.item.itemCount)this.item.isTest=!1,this.item.visible=!0,util.playSound("click_mp3",function(){}),this.item.itemCount=2,this.item.createItem(),this.handerDragonBones.display.visible=!0,this.reccoonDragonbonFront.animation.gotoAndStop("newAnimation"),this.maskBg.visible=!0;else{var e=RES.getRes("bg_mp3"),i=e.play(0,-1);i.volume=.05,util.playSound("click_mp3",function(){t.maskStartFun(function(){t.reccoonDragonbonFront.animation.gotoAndPlay("newAnimation",0,0,1)}),util.playSound("1_mp3",function(){})})}},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var Global=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)},e.level=0,e}(egret.Sprite);__reflect(Global.prototype,"Global");var game;!function(t){var e=function(t){function e(e,i,o){return void 0===i&&(i=!1),void 0===o&&(o=!1),t.call(this,e,i,o)||this}return __extends(e,t),e.UPDATE_MAIN_VALUE="update_main_value",e.CLOSH_WIN="close_win",e.TIME_OUT="time_out",e.TIP="tip",e.RUN_OVER="run_over",e}(egret.Event);t.MyEvent=e,__reflect(e.prototype,"game.MyEvent")}(game||(game={}));var game;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e}(egret.EventDispatcher);t.MyEventDispatcher=e,__reflect(e.prototype,"game.MyEventDispatcher")}(game||(game={}));var SendHttp=function(t){function e(e,i,o,n,a,s,h){void 0===a&&(a=null),void 0===s&&(s=null),void 0===h&&(h=null);var l=t.call(this)||this;l._comleteFun=a,l._errorFun=s,l._progressFun=h,l._obj=n;var r=new egret.HttpRequest;return r.responseType=egret.HttpResponseType.TEXT,"POST"==o?r.open(e,egret.HttpMethod.POST):r.open(e,egret.HttpMethod.GET),r.setRequestHeader("Content-Type","text/plain"),"POST"==o?r.send(i):r.send(),r.addEventListener(egret.Event.COMPLETE,l.onComplete,l),r.addEventListener(egret.IOErrorEvent.IO_ERROR,l.onIOError,l),r.addEventListener(egret.ProgressEvent.PROGRESS,l.onProgress,l),l._startTime=egret.getTimer(),l.addEventListener(egret.Event.ENTER_FRAME,l.countTime,l),l}return __extends(e,t),e.prototype.onComplete=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.COMPLETE,this.onComplete,this),e.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),e.removeEventListener(egret.ProgressEvent.PROGRESS,this.onProgress,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.countTime,this),this._comleteFun&&this._comleteFun(e.response,this._obj)},e.prototype.onIOError=function(t){console.log("post error : "+t),this._errorFun&&this._errorFun()},e.prototype.onProgress=function(t){this._progressFun&&this._progressFun()},e.prototype.countTime=function(){if(egret.getTimer()-this._startTime>1e4){var t=new game.MyEvent(game.MyEvent.TIME_OUT);game.MyEventDispatcher.getInstance().dispatchEvent(t)}},e}(egret.DisplayObjectContainer);__reflect(SendHttp.prototype,"SendHttp");var util;!function(t){function e(t,e,i){t.x=e,t.y=i}function i(t,e,i){t.scaleX=e,t.scaleY=i}function o(t){t.anchorOffsetX=.5*t.width,t.anchorOffsetY=.5*t.height}function n(t,e){var i=t.width/e;t.width=e,t.height=t.height/i}function a(t,e){var i=t.height/e;t.height=e,t.width=t.width/i}function s(t){var e=new egret.Bitmap;e.smoothing=!0;var i=RES.getRes(t);return e.texture=i,i||console.log("获取"+t+"失败"),e}function h(t,e,i,o,n){void 0===o&&(o=16711680),void 0===n&&(n=1);var a=t.graphics;a.clear(),a.beginFill(o),a.drawRoundRect(0,0,e,i,n,n),a.endFill()}function l(t,e){var i=t.split("?"),o="";if(i[0]==t)return o;var n=i[1];i=n.split("&");for(var a=0;a<i.length;a++){n=i[a];var s=n.split("=");s.length<=1||s[0]==e&&(o=s[1])}return o}function r(t,e){var i=RES.getRes(t);Global.soundChannel&&(Global.soundChannel.stop(),Global.soundChannelFun&&(Global.soundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,Global.soundChannelFun,this),Global.soundChannelFun=null)),Global.soundChannel=i.play(0,1),Global.soundMc&&Global.soundMc.gotoAndPlay(1,-1),e&&(Global.soundChannelFun=e,Global.soundChannel.addEventListener(egret.Event.SOUND_COMPLETE,function(){Global.soundChannelFun&&Global.soundChannelFun(),Global.soundMc&&Global.soundMc.gotoAndStop(1)},this))}function c(t){var e=RES.getRes(t+"_json"),i=RES.getRes(t+"_png"),o=new egret.MovieClipDataFactory(e,i);return o}function g(t,e,i,o){var n=RES.getRes(t+"_ske_json"),a=RES.getRes(t+"_tex_json"),s=RES.getRes(t+"_tex_png"),h=new dragonBones.EgretFactory;h.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(n)),h.addTextureAtlas(new dragonBones.EgretTextureAtlas(s,a));var l=h.buildArmature(e);dragonBones.WorldClock.clock.add(l),l.animation.gotoAndStop(i);var o=arguments[3]?arguments[3]:.01;return egret.Ticker.getInstance().register(function(t){dragonBones.WorldClock.clock.advanceTime(o)},this),l}var d=function(){function t(){}return t.hitTest=function(t,e){var i=t.getBounds(),o=e.getBounds();return i.x=t.x,i.y=t.y,o.x=e.x,o.y=e.y,i.intersects(o)},t}();t.Util=d,__reflect(d.prototype,"util.Util"),t.setPosition=e,t.setScale=i,t.setCneter=o,t.setWidth=n,t.setHeight=a,t.createBitmapByName=s,t.drawRec=h,t.getArgsFromHref=l,t.playSound=r,t.createFrameAnimate=c,t.createDragonBonAnimate=g}(util||(util={}));var Item=function(t){function e(){var e=t.call(this)||this;return e.scale=.7,e.countGan=0,e.countDraw=0,e.dis=140,e.itemCount=0,e.isTest=!0,e.padingLeft=30,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.init()},e.prototype.init=function(){this.stageW=this.stage.stageWidth,this.stageH=this.stage.stageHeight;var t=util.createBitmapByName("levelbg"+Global.level+"_png");t.width=this.stageW,t.height=this.stageH;var e=util.createBitmapByName("menu_png");this.menu_png=e,e.anchorOffsetX=.5*e.width,util.setScale(e,this.scale,this.scale),util.setPosition(e,.5*this.stageW,100);var i=util.createBitmapByName("clamp_png");util.setScale(i,this.scale,this.scale),util.setPosition(i,.5*this.stageW-i.width*this.scale*.5,e.y),this.board_png=new egret.DisplayObjectContainer;var o=util.createBitmapByName("board_png");util.setWidth(o,this.stageW-40),util.setCneter(o),this.board_png.x=.5*this.stageW,this.board_png.y=this.stageH+.5*o.height,this.board_png.addChild(o),this.addChild(t),this.addChild(e),this.addChild(this.board_png),this.addChild(i),this.ballLeft=util.createBitmapByName("ball_png"),util.setCneter(this.ballLeft),util.setScale(this.ballLeft,this.scale,this.scale),this.addChild(this.ballLeft),this.ballRight=util.createBitmapByName("ball_png"),util.setCneter(this.ballRight),util.setScale(this.ballRight,this.scale,this.scale),this.addChild(this.ballRight),this.ballLeft.visible=!0,this.ballRight.visible=!0,this.reccoonDragonbonBack=util.createDragonBonAnimate("raccoonBack","Armature","newAnimation",null),this.reccoonDragonbonBack.display.x=.5*this.stageW,this.reccoonDragonbonBack.display.y=this.stageH+450,this.reccoonDragonbonBack.display.scaleX=this.reccoonDragonbonBack.display.scaleY=this.scale-.1,this.addChild(this.reccoonDragonbonBack.display),this.handerDragonBones=util.createDragonBonAnimate("hand","Armature","旋转手",null),util.setScale(this.handerDragonBones.display,this.scale,this.scale),util.setPosition(this.handerDragonBones.display,.5*this.stageW,.5*this.stageH),this.addChild(this.handerDragonBones.display),this.handerDragonBones.display.visible=!1,this.reccoonDragonbonBack.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,this.frame_event,this),this.ballLeft.visible=!1,this.ballRight.visible=!1},e.prototype.startAnimate=function(){var t=this;this.isTest?Global.skipBtn&&(Global.skipBtn.visible=!0):Global.skipBtn&&(Global.skipBtn.visible=!1),this.countGan=0,this.countDraw=0,util.playSound("2_mp3",function(){util.playSound("bui_mp3",function(){t.itemCount<=2&&util.playSound("3_mp3",function(){})}),t.itemCount<=2?setTimeout(function(){t.reccoonDragonbonBack.display.x=.5*t.stageW;var e=egret.Tween.get(t.reccoonDragonbonBack.display,{loop:!1});e.to({y:t.stageH-80},500),e.wait(300),e.call(function(){t.reccoonDragonbonBack.animation.gotoAndPlay("newAnimation")})},500):setTimeout(function(){t.reccoonDragonbonBack.display.x=.5*t.stageW;var e=egret.Tween.get(t.reccoonDragonbonBack.display,{loop:!1});e.to({y:t.stageH-80},500),e.wait(200),e.call(function(){t.reccoonDragonbonBack.animation.gotoAndPlay("newAnimation")})},500)})},e.prototype.tenTip=function(){var t=this;setTimeout(function(){if(t.noClickTen){util.playSound("10_mp3",function(){});var e=t.chooseRight.scaleX,i=.2,o=egret.Tween.get(t.chooseRight,{loop:!1});o.to({scaleX:e+i,scaleY:e+i},300),o.to({scaleX:e,scaleY:e},300);var n=egret.Tween.get(t.chooseLeft,{loop:!1});n.to({scaleX:e+i,scaleY:e+i},300),n.to({scaleX:e,scaleY:e},300),t.tenTip()}},1e4)},e.prototype.frame_event=function(t){var e=this;if(console.log("armature 播放到了一个关键帧！ 帧标签为：",t.frameLabel),this.itemCount<=2){if("half"==t.frameLabel){if(0==this.countGan){var i=.4;util.setScale(this.chooseLeft,this.scale*i,this.scale*i),util.setScale(this.chooseRight,this.scale*i,this.scale*i),this.ballLeft.visible=!0,this.ballRight.visible=!0,this.chooseLeft.visible=!1,this.chooseRight.visible=!1}if(2==this.countGan){this.ballLeft.visible=!1,this.ballRight.visible=!1,this.chooseLeft.visible=!0,this.chooseRight.visible=!0;var i=.6;util.setScale(this.chooseLeft,this.scale*i,this.scale*i),util.setScale(this.chooseRight,this.scale*i,this.scale*i)}if(4==this.countGan){var i=.8;util.setScale(this.chooseLeft,this.scale*i,this.scale*i),util.setScale(this.chooseRight,this.scale*i,this.scale*i)}if(6==this.countGan){var i=1;util.setScale(this.chooseLeft,this.scale*i,this.scale*i),util.setScale(this.chooseRight,this.scale*i,this.scale*i)}if(this.countGan++,8==this.countGan){this.countGan=0,this.reccoonDragonbonBack.animation.stop("newAnimation"),this.twReccoonGan&&this.twReccoonGan.pause();var o=egret.Tween.get(this.reccoonDragonbonBack.display,{loop:!1});o.to({y:this.stageH+450},500),o.call(function(){e.reccoonDragonbonBack.animation.gotoAndStop("newAnimation");var t;t=3!=e.itemCount?"5_mp3":"4_mp3",util.playSound(t,function(){e.noClickTen=!0,e.tenTip(),3!=e.itemCount&&(e.handerDragonBones.display.visible=!0),1==e.itemCount||3==e.itemCount?e.handerDragonBones.display.x=e.chooseRight.x+120:e.handerDragonBones.display.x=e.chooseLeft.x+120,e.handerDragonBones.display.y=e.chooseRight.y+140,e.handerDragonBones.animation.gotoAndPlay("旋转手",0,0,100),1==e.itemCount||3==e.itemCount?(e.chooseRight.touchEnabled=!0,e.chooseRight.addEventListener(egret.TouchEvent.TOUCH_TAP,e.chooseLeftHideAnimate,e)):(e.chooseLeft.touchEnabled=!0,e.chooseLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,e.chooseRightHideAnimate,e))})},this)}}}else if("half"==t.frameLabel&&0==this.countGan){this.ballLeft.visible=!1,this.ballRight.visible=!1,this.chooseLeft.visible=!0,this.chooseRight.visible=!0;var i=1,n=egret.Tween.get(this.chooseRight,{loop:!1});n.to({scaleX:this.scale*i,scaleY:this.scale*i},200);var a=egret.Tween.get(this.chooseLeft,{loop:!1});a.to({scaleX:this.scale*i,scaleY:this.scale*i},200),this.countGan=0,this.reccoonDragonbonBack.animation.stop("newAnimation"),this.twReccoonGan&&this.twReccoonGan.pause();var o=egret.Tween.get(this.reccoonDragonbonBack.display,{loop:!1});o.to({y:this.stageH+450},400),o.call(function(){e.reccoonDragonbonBack.animation.gotoAndStop("newAnimation");var t;t=3!=e.itemCount?"5_mp3":"4_mp3",util.playSound(t,function(){e.noClickTen=!0,e.tenTip(),3!=e.itemCount&&(e.handerDragonBones.display.visible=!0),1==e.itemCount||3==e.itemCount?e.handerDragonBones.display.x=e.chooseRight.x+120:e.handerDragonBones.display.x=e.chooseLeft.x+120,e.handerDragonBones.display.y=e.chooseRight.y+140,e.handerDragonBones.animation.gotoAndPlay("旋转手",0,0,100),1==e.itemCount||3==e.itemCount?(e.chooseRight.touchEnabled=!0,e.chooseRight.addEventListener(egret.TouchEvent.TOUCH_TAP,e.chooseLeftHideAnimate,e)):(e.chooseLeft.touchEnabled=!0,e.chooseLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,e.chooseRightHideAnimate,e))})},this)}},e.prototype.chooseLeftHideAnimate=function(){var t=this;this.noClickTen=!1,this.chooseRight&&this.chooseRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseLeftHideAnimate,this),this.chooseLeft&&this.chooseLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseRightHideAnimate,this),util.playSound("click_mp3",function(){}),this.choose=this.chooseRight,this.handerDragonBones.display.visible=!1;var e=1.2,i=egret.Tween.get(this.chooseRight,{loop:!1});i.to({scaleX:this.scale*e,scaleY:this.scale*e},300),i.to({scaleX:this.scale,scaleY:this.scale},300),i.call(function(){var e=egret.Tween.get(t.chooseLeft,{loop:!1});e.to({alpha:0},500),e.call(function(){var e=egret.Tween.get(t.chooseRight,{loop:!1});e.to({x:.5*t.stageW},400),e.call(function(){3==t.itemCount?t.chooseDownAnimate():t.drawAnimate()},t)},t)})},e.prototype.chooseRightHideAnimate=function(){var t=this;this.noClickTen=!1,this.chooseRight&&this.chooseRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseLeftHideAnimate,this),this.chooseLeft&&this.chooseLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseRightHideAnimate,this),util.playSound("click_mp3",function(){}),this.choose=this.chooseLeft,this.handerDragonBones.display.visible=!1;var e=1.2,i=egret.Tween.get(this.chooseLeft,{loop:!1});i.to({scaleX:this.scale*e,scaleY:this.scale*e},300),i.to({scaleX:this.scale,scaleY:this.scale},300),i.call(function(){var e=egret.Tween.get(t.chooseRight,{loop:!1});e.to({alpha:0},500),e.call(function(){var e=egret.Tween.get(t.chooseLeft,{loop:!1});e.to({x:.5*t.stageW},400),e.call(function(){3==t.itemCount?t.chooseDownAnimate():t.drawAnimate()},t)},t)})},e.prototype.chooseDownAnimate=function(){var t=this;this.noClickTen=!1;var e;e=this.isTest?util.createBitmapByName("testR"+Global.level+"_png"):util.createBitmapByName("testR"+this.randomNum+"_png"),util.setCneter(e),util.setScale(e,this.scale,this.scale),util.setPosition(e,this.choose.x,this.choose.y),this.addChildAt(e,this.getChildIndex(this.choose)),this.removeChild(this.choose),this.choose=e,this.choose.alpha=.5;var i=egret.Tween.get(this.choose,{loop:!1});this.choose.alpha=1,i.to({y:this.choose.y-350,scaleX:1.4*this.scale,scaleY:1.4*this.scale},800);var o=egret.Tween.get(this.board_png,{loop:!1});this.board_png.numChildren>5?o.to({y:this.stageH-100},500):o.to({y:this.stageH},500),o.call(function(){var e,o;e=t.board_png.numChildren>1?t.board_png.getChildAt(t.board_png.numChildren-1).x:0,t.board_png.numChildren>5&&(e=t.board_png.numChildren>1||6!=t.board_png.numChildren?t.board_png.getChildAt(t.board_png.numChildren-6).x:0),o=t.board_png.numChildren>1?t.board_png.getChildAt(t.board_png.numChildren-1).y:0;var n,a,s=.3,h=40,l=t.padingLeft;t.board_png.numChildren>1&&6!=t.board_png.numChildren?(n=t.board_png.localToGlobal(e,o).x+t.choose.width*s+l,a=t.board_png.localToGlobal(e,o).y):(n=t.board_png.localToGlobal(e,o).x-.5*t.board_png.getChildAt(0).width+.5*t.choose.width*s+l,a=t.board_png.localToGlobal(e,o).y-.5*t.board_png.getChildAt(0).height+.5*t.choose.height*s+h,6==t.board_png.numChildren&&(a=t.board_png.localToGlobal(e,o).y+t.choose.height*s+h)),i.to({x:n,y:a,rotation:0,scaleX:s,scaleY:s},700),i.wait(500),i.call(function(){t.choose.x=t.board_png.globalToLocal(n,a).x,t.choose.y=t.board_png.globalToLocal(n,a).y,t.board_png.addChild(t.choose);var e=egret.Tween.get(t.board_png,{loop:!1});e.to({y:t.stageH+300},500),e.call(function(){t.isTest?(t.visible=!1,t.gc(),Global.skipBtn&&(Global.skipBtn.visible=!1),Global.startFun&&Global.startFun(),util.playSound("9_mp3",function(){})):(t.itemCount=2,t.createItem())},t)},t)},500)},e.prototype.chooseUpAnimate=function(){var t=this,e=egret.Tween.get(this.choose,{loop:!1});e.to({rotation:45},400),e.to({y:this.targetCon.localToGlobal(0,this.tarShadow_png.y).y},600),e.call(function(){t.tarShadow_png.visible=!0;var e=egret.Tween.get(t.tarShadow_png,{loop:!1});e.to({alpha:0},300),e.to({alpha:1},300),e.to({alpha:0},300),e.to({alpha:1},300),e.call(function(){t.tarShadow_png.visible=!1;var e=egret.Tween.get(t.choose,{loop:!1});e.to({y:t.choose.y+200,scaleX:1.2*t.scale,scaleY:1.2*t.scale},600),e.wait(500);var i=egret.Tween.get(t.board_png,{loop:!1});t.board_png.numChildren>5?i.to({y:t.stageH-100},500):i.to({y:t.stageH},500),i.call(function(){var i,o;i=t.board_png.numChildren>1?t.board_png.getChildAt(t.board_png.numChildren-1).x:0,t.board_png.numChildren>5&&(i=t.board_png.numChildren>1||6!=t.board_png.numChildren?t.board_png.getChildAt(t.board_png.numChildren-6).x:0),o=t.board_png.numChildren>1?t.board_png.getChildAt(t.board_png.numChildren-1).y:0;var n,a,s=.3,h=40,l=t.padingLeft;t.board_png.numChildren>1&&6!=t.board_png.numChildren?(n=t.board_png.localToGlobal(i,o).x+t.choose.width*s+l,a=t.board_png.localToGlobal(i,o).y):(n=t.board_png.localToGlobal(i,o).x-.5*t.board_png.getChildAt(0).width+.5*t.choose.width*s+l,a=t.board_png.localToGlobal(i,o).y-.5*t.board_png.getChildAt(0).height+.5*t.choose.height*s+h,6==t.board_png.numChildren&&(a=t.board_png.localToGlobal(i,o).y+t.choose.height*s+h)),e.to({x:n,y:a,rotation:0,scaleX:s,scaleY:s},700),e.wait(500),e.call(function(){t.choose.x=t.board_png.globalToLocal(n,a).x,t.choose.y=t.board_png.globalToLocal(n,a).y,t.board_png.addChild(t.choose);var e=egret.Tween.get(t.board_png,{loop:!1});e.to({y:t.stageH+300},500),e.call(function(){t.createItem()},t)},t)},500)},t)},this)},e.prototype.drawAnimate=function(){var t=this;this.drawDragonbon?this.drawDragonbon.display.visible=!0:(this.drawDragonbon=util.createDragonBonAnimate("raccoonDraw","Armature","newAnimation",null),this.drawDragonbon.display.scaleX=this.drawDragonbon.display.scaleY=this.scale-.1,this.addChild(this.drawDragonbon.display),this.drawDragonbon.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,this.frame_event_draw,this)),this.drawDragonbon.display.x=.5*this.stageW,this.drawDragonbon.display.y=this.stageH+550,util.playSound("bui_mp3",function(){}),setTimeout(function(){setTimeout(function(){t.drawDragonbon.animation.gotoAndPlay("newAnimation")},500);var e=egret.Tween.get(t.drawDragonbon.display,{loop:!1});e.to({y:t.stageH-200},300),e.wait(200),e.to({y:t.drawDragonbon.display.y+30},1e3)},500)},e.prototype.frame_event_draw=function(t){if("half"==t.frameLabel){if(console.log(this.countGan),0==this.countDraw){var e;1==this.itemCount&&(e=util.createBitmapByName("demoR"+Global.level+"_png")),2==this.itemCount&&(e=util.createBitmapByName("demoL"+Global.level+"_png")),3==this.itemCount&&(e=util.createBitmapByName("testR"+Global.level+"_png")),util.setCneter(e),util.setScale(e,this.scale,this.scale),util.setPosition(e,this.choose.x,this.choose.y),this.addChildAt(e,this.getChildIndex(this.choose)),this.removeChild(this.choose),this.choose=e,this.choose.alpha=.5
}1==this.countDraw&&(this.choose.alpha=.9),2==this.countDraw&&(this.choose.alpha=1),3==this.countDraw&&(this.choose.alpha=1),this.countDraw++,4==this.countDraw&&(this.choose.alpha=1,this.drawDragonbon.display.visible=!1,this.drawDragonbon.animation.stop(),this.chooseUpAnimate())}},e.prototype.gc=function(){for(this.targetCon&&this.targetCon.parent&&(this.targetCon.parent.removeChild(this.targetCon),this.targetCon=null);this.board_png.numChildren>1;)this.board_png.removeChildAt(this.board_png.numChildren-1);this.handerDragonBones.display.visible=!1,this.reccoonDragonbonBack.display.y=this.stageH+450,this.handerDragonBones.animation.gotoAndStop("newAnimation"),this.drawDragonbon&&(this.drawDragonbon.display.visible=!1,this.drawDragonbon.animation.stop()),this.chooseRight&&(this.chooseRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseLeftHideAnimate,this),this.chooseRight.parent&&this.chooseRight.parent.removeChild(this.chooseRight)),this.chooseLeft&&(this.chooseLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseRightHideAnimate,this),this.chooseLeft.parent&&this.chooseLeft.parent.removeChild(this.chooseLeft)),egret.Tween.removeAllTweens(),this.board_png.y=this.stageH+.5*this.board_png.getChildAt(0).height,Global.soundChannelFun=null,util.setPosition(this.ballLeft,-1e3,this.stageH-300),util.setPosition(this.ballRight,-1e3,this.stageH-300),this.countDraw=0,this.countGan=0},e.prototype.createItem=function(){var t=this;this.reccoonDragonbonBack.display.y=this.stageH+450;var e=350;util.setPosition(this.ballLeft,.5*this.stageW-this.dis,this.stageH-e),util.setPosition(this.ballRight,.5*this.stageW+this.dis,this.stageH-e),this.isTest?Global.skipBtn.visible=!0:Global.skipBtn.visible=!1,this.randomNum=Math.floor(4*Math.random()+0),this.itemCount++,this.targetConNew=new egret.DisplayObjectContainer;var i=util.createBitmapByName("paper_png");util.setCneter(i);var o;o=1==this.itemCount||2==this.itemCount?util.createBitmapByName("demoR"+Global.level+"_png"):this.isTest?util.createBitmapByName("testR"+Global.level+"_png"):util.createBitmapByName("testR"+this.randomNum+"_png"),util.setCneter(o),o.rotation=45,this.tarShadow_png=util.createBitmapByName("shadow"+Global.level+"_png"),util.setCneter(this.tarShadow_png),this.tarShadow_png.rotation=45,this.tarShadow_png.visible=!1,this.targetConNew.addChild(i),this.targetConNew.addChild(this.tarShadow_png),this.targetConNew.addChild(o),util.setPosition(this.targetConNew,.5*this.stageW,this.menu_png.y+this.targetConNew.height*this.scale*.5+30),util.setScale(this.targetConNew,this.scale,this.scale),this.addChildAt(this.targetConNew,this.getChildIndex(this.menu_png)+1);var n=this.ballLeft.x,a=this.ballLeft.y,s=this.ballRight.x,h=this.ballRight.y;this.ballLeft.x=-100,this.ballRight.x=-100,this.ballLeft.y=a+100,this.ballRight.y=h-200,this.ballLeft.visible=!0,this.ballRight.visible=!0,this.ballLeft.visible=this.ballRight.visible=!0;var l=egret.Tween.get(this.ballLeft,{loop:!1});l.to({alpha:1,rotation:260,x:n,y:a},1e3);var r=egret.Tween.get(this.ballRight,{loop:!1});if(r.to({alpha:1,rotation:260,x:s,y:h},1e3),r.call(function(){t.startAnimate()}),this.targetCon&&util.playSound("paper_mp3",function(){}),this.chooseRight&&this.chooseRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseLeftHideAnimate,this),this.chooseLeft&&this.chooseLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseRightHideAnimate,this),1==this.itemCount||2==this.itemCount?this.chooseLeft=util.createBitmapByName("demoLL"+Global.level+"_png"):this.isTest?this.chooseLeft=util.createBitmapByName("testLL"+Global.level+"_png"):this.chooseLeft=util.createBitmapByName("testLL"+this.randomNum+"_png"),util.setScale(this.chooseLeft,this.scale,this.scale),util.setCneter(this.chooseLeft),this.addChildAt(this.chooseLeft,5),util.setPosition(this.chooseLeft,.5*this.stageW-this.dis,this.stageH-e),1==this.itemCount||2==this.itemCount?this.chooseRight=util.createBitmapByName("demoRR"+Global.level+"_png"):this.isTest?this.chooseRight=util.createBitmapByName("testRR"+Global.level+"_png"):this.chooseRight=util.createBitmapByName("testRR"+this.randomNum+"_png"),util.setScale(this.chooseRight,this.scale,this.scale),util.setCneter(this.chooseRight),this.addChildAt(this.chooseRight,5),util.setPosition(this.chooseRight,.5*this.stageW+this.dis,this.stageH-e),this.ballLeft.visible=!0,this.ballRight.visible=!0,this.chooseLeft.visible=!1,this.chooseRight.visible=!1,this.targetCon){var c=egret.Tween.get(this.targetCon);c.to({rotation:90,x:-400,y:this.targetCon.y+300},900),c.wait(1e3),c.call(function(){t.removeChild(t.targetCon),t.targetCon=t.targetConNew})}else this.targetCon=this.targetConNew},e}(egret.DisplayObjectContainer);__reflect(Item.prototype,"Item");var LetterMc=function(t){function e(e,i,o){var n=t.call(this)||this;return n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onAddToStage,n),n}return __extends(e,t),e.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)},e}(egret.Sprite);__reflect(LetterMc.prototype,"LetterMc");