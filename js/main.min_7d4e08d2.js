var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(a,n){function s(t){try{l(o.next(t))}catch(e){n(e)}}function r(t){try{l(o["throw"](t))}catch(e){n(e)}}function l(t){t.done?a(t.value):new i(function(e){e(t.value)}).then(s,r)}l((o=o.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return o([t,e])}}function o(i){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,n&&(s=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(n,i[1])).done)return s;switch(n=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,n=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){l.label=i[1];break}if(6===i[0]&&l.label<s[1]){l.label=s[1],s=i;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(i);break}s[2]&&l.ops.pop(),l.trys.pop();continue}i=e.call(t,l)}catch(o){i=[6,o],n=0}finally{a=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var a,n,s,r,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.createView,e),e}return __extends(e,t),e.prototype.createView=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.createView,this);var t=this.stage.stageWidth,e=this.stage.stageHeight;this.textField=new egret.TextField,this.textField.y=100,this.textField.width=t,this.textField.height=40,this.textField.textAlign="center",this.textField.textColor=16711680;var i=RES.getRes("loadingMc_json"),o=RES.getRes("loadingMc_png"),a=new egret.MovieClipDataFactory(i,o),n=new egret.MovieClip(a.generateMovieClipData("McLoad"));n.frameRate=36,n.gotoAndPlay(1,-1),n.y=.5*e-250,n.x=.5*t-.5*n.width+150,this.addChild(n);var s=this.createBitmapByName("proBg_png");s.x=.5*t-.5*n.width,s.y=.5*e-.5*n.height+200,this.addChild(s),this.textField.y=s.y+8,this.addChild(this.textField);var r=new egret.TextField;r.y=s.y+80,r.width=t,r.height=40,r.text="加载中…",r.textAlign="center",r.textColor=0,r.size=24,this.addChild(r)},e.prototype.onProgress=function(t,e){var i=Math.round(t/e*100);this.textField&&(this.textField.text=""+i+"%")},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){Global.level=Number(util.getArgsFromHref(window.location.href,"level")),this.stageW=this.stage.stageWidth,this.stageH=this.stage.stageHeight,egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResourceLoading()];case 1:return t.sent(),this.createGameSceneLoading(),[4,this.loadResource()];case 2:return t.sent(),this.createGameScene(),[2]}})})},e.prototype.createGameSceneLoading=function(){},e.prototype.loadResourceLoading=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=new LoadingUI,[4,RES.loadConfig("resource/loading.json","")];case 1:return i.sent(),[4,RES.loadGroup("preloadLoading",0,t)];case 2:return i.sent(),[3,4];case 3:return e=i.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return i.sent(),this.stage.removeChild(t),[3,4];case 3:return e=i.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.createGameScene=function(){var t=util.createBitmapByName("bg"+Global.level+"_png");this.addChild(t),this.stageW=this.stage.stageWidth,this.stageH=this.stage.stageHeight,t.width=this.stageW,t.height=this.stageH;var e=util.createDragonBonAnimate("raccoonFront","Armature","newAnimation");this.reccoonDragonbonFront=e,e.display.x=.5*this.stageW,e.display.y=.5*this.stageH-100,e.display.scaleX=e.display.scaleY=.4,this.addChild(e.display),e.addEventListener(dragonBones.AnimationEvent.START,this.startPlayDragonbon,this),e.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.loopCompleteDragonbon,this);var i=30,o=new egret.MovieClip(util.createFrameAnimate("soundMc").generateMovieClipData("soundMc"));o.frameRate=3,o.gotoAndPlay(1,-1),this.addChild(o),util.setPosition(o,i,i),Global.soundMc=o;var a=util.createBitmapByName("skipBtn_png");util.setWidth(a,150),this.addChild(a),util.setPosition(a,this.stageW-a.width-i,i);var n=util.createBitmapByName("replayBtn_png");this.replayBtn=n,util.setWidth(n,360),util.setCneter(n),this.addChild(n),util.setPosition(n,.5*this.stageW,this.stageH-200),n.touchEnabled=!0,n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.replayFun,this),n.visible=!1;var s=util.createBitmapByName("mask_png");this.maskBg=s,s.width=this.stageW,s.height=this.stageH,s.x=.5*this.stageW,s.y=.5*this.stageH,s.anchorOffsetX=.5*this.stageW,s.anchorOffsetY=.5*this.stageH,this.addChild(s);var r=util.createBitmapByName("maskRaccoon_png");r.width=this.stageW,r.height=this.stageH,r.x=.5*this.stageW,r.y=.5*this.stageH,r.anchorOffsetX=.5*this.stageW,r.anchorOffsetY=.5*this.stageH,this.maskStartFun=function(t){var e=this;this.addChild(r);var i=egret.Tween.get(r,{loop:!1});i.call(function(){e.addChild(r),s.visible=!1},this),i.to({scaleX:16,scaleY:10},500),i.call(function(){e.contains(r)&&(e.removeChild(r),r.x=.5*e.stageW,r.y=.5*e.stageH,r.scaleX=1,r.scaleY=1,s.visible=!1),t()},this)};var l=util.createBitmapByName("playBtn_png");this.playBtn=l,this.addChild(l),util.setWidth(l,190),util.setCneter(l),l.x=.5*this.stageW,l.y=.5*this.stageH,l.touchEnabled=!0,l.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startFun,this);var h=util.createDragonBonAnimate("hand","Armature","正常手");this.handerDragonBones=h,util.setPosition(h.display,.5*this.stageW,.5*this.stageH+150),this.addChild(h.display),h.animation.gotoAndPlay("正常手",0,0,100),this.demo1Item=new Demo1Item,this.addChild(this.demo1Item),this.demo1Item.visible=!1},e.prototype.startPlayDragonbon=function(t){},e.prototype.loopCompleteDragonbon=function(t){this.cloudsAnimate()},e.prototype.cloudsAnimate=function(){var t=this,e=new egret.DisplayObjectContainer;this.cloudsCon=e;var i=util.createBitmapByName("cloud_png"),o=util.createBitmapByName("cloud_png"),a=util.createBitmapByName("cloud_png"),n=util.createBitmapByName("cloud_png"),s=util.createBitmapByName("cloud_png"),r=util.createBitmapByName("cloud_png");e.addChild(i),e.addChild(o),e.addChild(a),e.addChild(n),e.addChild(s),e.addChild(r),s.alpha=.5,n.alpha=.5,a.alpha=.5,o.alpha=.5,i.alpha=.5,r.alpha=.5,e.x=-50,this.addChild(e),e.scaleX=e.scaleY=.1,o.x=400,o.y=-50,a.x=230,a.y=250,n.x=0,n.y=350,s.x=500,s.y=350,r.x=250,r.y=550,e.anchorOffsetX=.5*e.width*.5+100,e.anchorOffsetY=.5*e.height*.5+100,e.x=.5*this.stageW-10,e.y=.5*this.stageH;var l=egret.Tween.get(e,{loop:!1});l.to({scaleX:2.5,scaleY:2.5},1e3),l.call(function(){t.demo1Item.visible=!0});var h=egret.Tween.get(i,{loop:!1});h.to({alpha:1},1e3),h.wait(800),h.to({x:i.x-100,alpha:0},700);var c=egret.Tween.get(o,{loop:!1});c.to({alpha:1},1e3),c.wait(800),c.to({x:o.x+100,alpha:0},700);var g=egret.Tween.get(a,{loop:!1});g.to({alpha:1},1e3),g.wait(800),g.to({x:a.x+100,alpha:0},700);var d=egret.Tween.get(n,{loop:!1});d.to({alpha:1},1e3),d.wait(800),d.to({x:n.x-100,alpha:0},700);var u=egret.Tween.get(s,{loop:!1});u.to({alpha:1},1e3),u.wait(800),u.to({x:s.x+100,alpha:0},700);var p=egret.Tween.get(r,{loop:!1});p.to({alpha:1},1e3),p.wait(800),p.to({x:r.x+100,alpha:0},700),p.wait(1e3),p.call(function(){return t.replayBtn.visible=!0,1!=t.demo1Item.itemCount?(t.demo1Item.itemCount=2,t.demo1Item.changeItem(),t.playBtn.visible=!0,t.handerDragonBones.display.visible=!0,t.handerDragonBones.animation.gotoAndPlay("正常手",0,0,100),t.reccoonDragonbonFront.animation.gotoAndStop("newAnimation"),void(t.maskBg.visible=!0)):(t.demo1Item.startAnimate(),t.playBtn.visible=!0,t.handerDragonBones.display.visible=!0,t.handerDragonBones.animation.gotoAndPlay("正常手",0,0,100),t.reccoonDragonbonFront.animation.gotoAndStop("newAnimation"),t.maskBg.visible=!0,void 0)},this)},e.prototype.replayFun=function(){this.replayBtn.visible&&(this.demo1Item.itemCount=1,this.demo1Item.visible=!0,this.demo1Item.replayFun())},e.prototype.startFun=function(){var t=this;if(this.playBtn.visible){this.playBtn.visible=!1,this.handerDragonBones.display.visible=!1;var e=RES.getRes("bg_mp3"),i=e.play(0,-1);i.volume=.05,util.playSound("click_mp3",function(){t.maskStartFun(function(){t.reccoonDragonbonFront.animation.gotoAndPlay("newAnimation",0,0,1)}),util.playSound("1_mp3",function(){Global.soundMc.visible=!1})})}},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var Global=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)},e.level=0,e}(egret.Sprite);__reflect(Global.prototype,"Global");var game;!function(t){var e=function(t){function e(e,i,o){return void 0===i&&(i=!1),void 0===o&&(o=!1),t.call(this,e,i,o)||this}return __extends(e,t),e.UPDATE_MAIN_VALUE="update_main_value",e.CLOSH_WIN="close_win",e.TIME_OUT="time_out",e.TIP="tip",e.RUN_OVER="run_over",e}(egret.Event);t.MyEvent=e,__reflect(e.prototype,"game.MyEvent")}(game||(game={}));var game;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e}(egret.EventDispatcher);t.MyEventDispatcher=e,__reflect(e.prototype,"game.MyEventDispatcher")}(game||(game={}));var SendHttp=function(t){function e(e,i,o,a,n,s,r){void 0===n&&(n=null),void 0===s&&(s=null),void 0===r&&(r=null);var l=t.call(this)||this;l._comleteFun=n,l._errorFun=s,l._progressFun=r,l._obj=a;var h=new egret.HttpRequest;return h.responseType=egret.HttpResponseType.TEXT,"POST"==o?h.open(e,egret.HttpMethod.POST):h.open(e,egret.HttpMethod.GET),h.setRequestHeader("Content-Type","text/plain"),"POST"==o?h.send(i):h.send(),h.addEventListener(egret.Event.COMPLETE,l.onComplete,l),h.addEventListener(egret.IOErrorEvent.IO_ERROR,l.onIOError,l),h.addEventListener(egret.ProgressEvent.PROGRESS,l.onProgress,l),l._startTime=egret.getTimer(),l.addEventListener(egret.Event.ENTER_FRAME,l.countTime,l),l}return __extends(e,t),e.prototype.onComplete=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.COMPLETE,this.onComplete,this),e.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),e.removeEventListener(egret.ProgressEvent.PROGRESS,this.onProgress,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.countTime,this),this._comleteFun&&this._comleteFun(e.response,this._obj)},e.prototype.onIOError=function(t){console.log("post error : "+t),this._errorFun&&this._errorFun()},e.prototype.onProgress=function(t){this._progressFun&&this._progressFun()},e.prototype.countTime=function(){if(egret.getTimer()-this._startTime>1e4){var t=new game.MyEvent(game.MyEvent.TIME_OUT);game.MyEventDispatcher.getInstance().dispatchEvent(t)}},e}(egret.DisplayObjectContainer);__reflect(SendHttp.prototype,"SendHttp");var util;!function(t){function e(t,e,i){t.x=e,t.y=i}function i(t,e,i){t.scaleX=e,t.scaleY=i}function o(t){t.anchorOffsetX=.5*t.width,t.anchorOffsetY=.5*t.height}function a(t,e){var i=t.width/e;t.width=e,t.height=t.height/i}function n(t,e){var i=t.height/e;t.height=e,t.width=t.width/i}function s(t){var e=new egret.Bitmap;e.smoothing=!0;var i=RES.getRes(t);return e.texture=i,i||console.log("获取"+t+"失败"),e}function r(t,e,i,o,a){void 0===o&&(o=16711680),void 0===a&&(a=1);var n=t.graphics;n.clear(),n.beginFill(o),n.drawRoundRect(0,0,e,i,a,a),n.endFill()}function l(t,e){var i=t.split("?"),o="";if(i[0]==t)return o;var a=i[1];i=a.split("&");for(var n=0;n<i.length;n++){a=i[n];var s=a.split("=");s.length<=1||s[0]==e&&(o=s[1])}return o}function h(t,e){Global.soundMc.visible=!0;var i=RES.getRes(t);Global.soundChannel&&(Global.soundChannel.stop(),Global.soundChannelFun&&(Global.soundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,Global.soundChannelFun,this),Global.soundChannelFun=null)),Global.soundChannel=i.play(0,1),e&&(Global.soundChannelFun=e,Global.soundChannel.addEventListener(egret.Event.SOUND_COMPLETE,e,this))}function c(t){var e=RES.getRes(t+"_json"),i=RES.getRes(t+"_png"),o=new egret.MovieClipDataFactory(e,i);return o}function g(t,e,i){var o=RES.getRes(t+"_ske_json"),a=RES.getRes(t+"_tex_json"),n=RES.getRes(t+"_tex_png"),s=new dragonBones.EgretFactory;s.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(o)),s.addTextureAtlas(new dragonBones.EgretTextureAtlas(n,a));var r=s.buildArmature(e);return dragonBones.WorldClock.clock.add(r),r.animation.gotoAndStop(i),egret.Ticker.getInstance().register(function(t){dragonBones.WorldClock.clock.advanceTime(.01)},this),r}var d=function(){function t(){}return t.hitTest=function(t,e){var i=t.getBounds(),o=e.getBounds();return i.x=t.x,i.y=t.y,o.x=e.x,o.y=e.y,i.intersects(o)},t}();t.Util=d,__reflect(d.prototype,"util.Util"),t.setPosition=e,t.setScale=i,t.setCneter=o,t.setWidth=a,t.setHeight=n,t.createBitmapByName=s,t.drawRec=r,t.getArgsFromHref=l,t.playSound=h,t.createFrameAnimate=c,t.createDragonBonAnimate=g}(util||(util={}));var Demo1Item=function(t){function e(){var e=t.call(this)||this;return e.scale=.8,e.countGan=0,e.countDraw=0,e.dis=140,e.itemCount=1,e.state=1,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.init()},e.prototype.init=function(){this.stageW=this.stage.stageWidth,this.stageH=this.stage.stageHeight;var t=util.createBitmapByName("levelbg"+Global.level+"_png");t.width=this.stageW,t.height=this.stageH;var e=util.createBitmapByName("menu_png");e.anchorOffsetX=.5*e.width,util.setScale(e,this.scale,this.scale),util.setPosition(e,.5*this.stageW,100),this.targetCon=new egret.DisplayObjectContainer;var i=util.createBitmapByName("paper_png");util.setCneter(i);var o=util.createBitmapByName("demoR"+Global.level+"_png");this.socks_png=o,util.setCneter(this.socks_png),o.rotation=45;var a=util.createBitmapByName("shadow"+Global.level+"_png");this.socksShadow_png=a,util.setCneter(this.socksShadow_png),a.rotation=45,a.visible=!1;var n=util.createBitmapByName("clamp_png");util.setScale(n,this.scale,this.scale),util.setPosition(n,.5*this.stageW-n.width*this.scale*.5,e.y),this.board_png=new egret.DisplayObjectContainer;var s=util.createBitmapByName("board_png");util.setWidth(s,this.stageW-40),util.setCneter(s),this.board_png.x=.5*this.stageW,this.board_png.y=this.stageH+.5*s.height,this.board_png.addChild(s),this.addChild(t),this.addChild(e),this.targetCon.addChild(i),this.targetCon.addChild(a),this.targetCon.addChild(o),util.setPosition(this.targetCon,.5*this.stageW,e.y+this.targetCon.height*this.scale*.5+30),util.setScale(this.targetCon,this.scale,this.scale),this.addChild(this.targetCon),this.addChild(this.board_png),this.addChild(n);var r=this.dis;this.ballLeft=util.createBitmapByName("ball_png"),util.setCneter(this.ballLeft),util.setScale(this.ballLeft,this.scale,this.scale),this.addChild(this.ballLeft),util.setPosition(this.ballLeft,.5*this.stageW-r,this.stageH-300),this.ballRight=util.createBitmapByName("ball_png"),util.setCneter(this.ballRight),util.setScale(this.ballRight,this.scale,this.scale),this.addChild(this.ballRight),util.setPosition(this.ballRight,.5*this.stageW+r,this.stageH-300),this.chooseLeft=util.createBitmapByName("demoLL"+Global.level+"_png"),util.setScale(this.chooseLeft,this.scale,this.scale),util.setCneter(this.chooseLeft),this.addChild(this.chooseLeft),util.setPosition(this.chooseLeft,.5*this.stageW-r,this.stageH-300),this.chooseRight=util.createBitmapByName("demoRR"+Global.level+"_png"),util.setScale(this.chooseRight,this.scale,this.scale),util.setCneter(this.chooseRight),this.addChild(this.chooseRight),util.setPosition(this.chooseRight,.5*this.stageW+r,this.stageH-300),this.ballLeft.visible=!0,this.ballRight.visible=!0,this.chooseLeft.visible=!1,this.chooseRight.visible=!1,this.reccoonDragonbonBack=util.createDragonBonAnimate("raccoonBack","Armature","newAnimation"),this.reccoonDragonbonBack.display.x=.5*this.stageW,this.reccoonDragonbonBack.display.y=this.stageH+450,this.reccoonDragonbonBack.display.scaleX=this.reccoonDragonbonBack.display.scaleY=this.scale-.1,this.addChild(this.reccoonDragonbonBack.display),this.handerDragonBones=util.createDragonBonAnimate("hand","Armature","旋转手"),util.setPosition(this.handerDragonBones.display,.5*this.stageW,.5*this.stageH),this.addChild(this.handerDragonBones.display),this.handerDragonBones.display.visible=!1,this.reccoonDragonbonBack.addEventListener(dragonBones.AnimationEvent.START,this.startPlayDragonbon,this),this.reccoonDragonbonBack.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.loopCompleteDragonbon,this),this.reccoonDragonbonBack.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,this.frame_event,this)},e.prototype.startAnimate=function(){var t=this;egret.Tween.removeAllTweens(),this.countGan=0,this.countDraw=0,util.playSound("2_mp3",function(){util.playSound("bui_mp3",function(){Global.soundMc.visible=!1,util.playSound("3_mp3",function(){Global.soundMc.visible=!1})}),setTimeout(function(){t.reccoonDragonbonBack.display.x=.5*t.stageW;var e=egret.Tween.get(t.reccoonDragonbonBack.display,{loop:!1});e.to({y:t.stageH-50},500),e.wait(300),e.call(function(){t.reccoonDragonbonBack.animation.gotoAndPlay("newAnimation")})},500)})},e.prototype.startPlayDragonbon=function(t){},e.prototype.loopCompleteDragonbon=function(t){},e.prototype.frame_event=function(t){var e=this;if("half"==t.frameLabel){if(0==this.countGan){this.state=1;var i=.4;util.setScale(this.chooseLeft,this.scale*i,this.scale*i),util.setScale(this.chooseRight,this.scale*i,this.scale*i),this.ballLeft.visible=!0,this.ballRight.visible=!0,this.chooseLeft.visible=!1,this.chooseRight.visible=!1}if(1==this.countGan){this.state=-1,this.ballLeft.visible=!1,this.ballRight.visible=!1,this.chooseLeft.visible=!0,this.chooseRight.visible=!0;var i=.6;util.setScale(this.chooseLeft,this.scale*i,this.scale*i),util.setScale(this.chooseRight,this.scale*i,this.scale*i)}if(2==this.countGan){this.state=1;var i=.8;util.setScale(this.chooseLeft,this.scale*i,this.scale*i),util.setScale(this.chooseRight,this.scale*i,this.scale*i)}if(3==this.countGan){this.state=-1;var i=1;util.setScale(this.chooseLeft,this.scale*i,this.scale*i),util.setScale(this.chooseRight,this.scale*i,this.scale*i)}if(this.countGan++,4==this.countGan){this.countGan=0,this.reccoonDragonbonBack.animation.stop(),this.twReccoonGan&&this.twReccoonGan.pause();var o=egret.Tween.get(this.reccoonDragonbonBack.display,{loop:!1});o.to({y:this.stageH+450},500),o.call(function(){var t;t=3!=e.itemCount?"5_mp3":"4_mp3",util.playSound(t,function(){3!=e.itemCount&&(e.handerDragonBones.display.visible=!0),1==e.itemCount||3==e.itemCount?e.handerDragonBones.display.x=e.chooseRight.x+120:e.handerDragonBones.display.x=e.chooseLeft.x+120,e.handerDragonBones.display.y=e.chooseRight.y+140,e.handerDragonBones.animation.gotoAndPlay("旋转手",0,0,100),1==e.itemCount||3==e.itemCount?(e.chooseRight.touchEnabled=!0,e.chooseRight.addEventListener(egret.TouchEvent.TOUCH_TAP,e.chooseLeftHideAnimate,e)):(e.chooseLeft.touchEnabled=!0,e.chooseLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,e.chooseRightHideAnimate,e)),Global.soundMc.visible=!1})},this)}}},e.prototype.chooseLeftHideAnimate=function(){var t=this;util.playSound("click_mp3",function(){Global.soundMc.visible=!1}),this.choose=this.chooseRight,this.handerDragonBones.display.visible=!1;var e=1.2,i=egret.Tween.get(this.chooseRight,{loop:!1});i.to({scaleX:this.scale*e,scaleY:this.scale*e},300),i.to({scaleX:this.scale,scaleY:this.scale},300),i.call(function(){var e=egret.Tween.get(t.chooseLeft,{loop:!1});e.to({alpha:0},500),e.call(function(){var e=egret.Tween.get(t.chooseRight,{loop:!1});e.to({x:.5*t.stageW},400),e.call(function(){3==t.itemCount?t.chooseDownAnimate():t.drawAnimate()},t)},t)})},e.prototype.chooseRightHideAnimate=function(){var t=this;util.playSound("click_mp3",function(){Global.soundMc.visible=!1}),this.choose=this.chooseLeft,this.handerDragonBones.display.visible=!1;var e=1.2,i=egret.Tween.get(this.chooseLeft,{loop:!1});i.to({scaleX:this.scale*e,scaleY:this.scale*e},300),i.to({scaleX:this.scale,scaleY:this.scale},300),i.call(function(){var e=egret.Tween.get(t.chooseRight,{loop:!1});e.to({alpha:0},500),e.call(function(){var e=egret.Tween.get(t.chooseLeft,{loop:!1});e.to({x:.5*t.stageW},400),e.call(function(){3==t.itemCount?t.chooseDownAnimate():t.drawAnimate()},t)},t)})},e.prototype.chooseDownAnimate=function(){var t=this,e=util.createBitmapByName("testR"+Global.level+"_png");util.setCneter(e),util.setScale(e,this.scale,this.scale),util.setPosition(e,this.choose.x,this.choose.y),this.addChildAt(e,this.getChildIndex(this.choose)),this.removeChild(this.choose),this.choose=e,this.choose.alpha=.5;var i,o=egret.Tween.get(this.choose,{loop:!1});1==this.itemCount&&(i=150),2==this.itemCount&&(i=this.choose.x),3==this.itemCount&&(i=this.stageW-150),this.choose.alpha=1,o.to({y:this.choose.y-350,scaleX:1.4*this.scale,scaleY:1.4*this.scale},800),o.to({x:i,y:this.stageH-100,scaleX:.4,scaleY:.4},700),o.wait(500),o.call(function(){var e=egret.Tween.get(t.board_png,{loop:!1});e.to({y:t.board_png.y+200},500);var i=egret.Tween.get(t.choose,{loop:!1});i.to({y:t.choose.y+200},500),i.call(function(){t.visible=!1},t)},this);var a=egret.Tween.get(this.board_png,{loop:!1});a.to({y:this.board_png.y-200},500)},e.prototype.chooseUpAnimate=function(){var t=this,e=egret.Tween.get(this.choose,{loop:!1});e.to({rotation:45},400),e.to({y:this.targetCon.localToGlobal(0,this.socksShadow_png.y).y},600),e.call(function(){t.socksShadow_png.visible=!0;var e=egret.Tween.get(t.socksShadow_png,{loop:!1});e.to({alpha:0},300),e.to({alpha:1},300),e.to({alpha:0},300),e.to({alpha:1},300),e.call(function(){t.socksShadow_png.visible=!1;var e,i=egret.Tween.get(t.choose,{loop:!1});1==t.itemCount&&(e=150),2==t.itemCount&&(e=t.choose.x),3==t.itemCount&&(e=t.stageW-t.choose.width-150),i.to({y:t.choose.y+200,scaleX:1.2*t.scale,scaleY:1.2*t.scale},600),i.to({y:t.stageH-100,scaleX:.4,scaleY:.4,x:e},600),i.wait(500),i.call(function(){var e=egret.Tween.get(t.board_png,{loop:!1});e.to({y:t.board_png.y+200},500);var i=egret.Tween.get(t.choose,{loop:!1});i.to({y:t.choose.y+200},500),i.call(function(){1==t.itemCount&&(t.choose.x=-200,t.choose.y=-110),2==t.itemCount&&(t.choose.x=0,t.choose.y=-110),t.board_png.addChild(t.choose),util.playSound("7_mp3",function(){t.changeItem()})},t)},t);var o=egret.Tween.get(t.board_png,{loop:!1});o.to({y:t.board_png.y-200},1e3)},t)},this)},e.prototype.drawAnimate=function(){var t=this;this.drawDragonbon?this.drawDragonbon.display.visible=!0:(this.drawDragonbon=util.createDragonBonAnimate("raccoonDraw","Armature","newAnimation"),this.drawDragonbon.display.scaleX=this.drawDragonbon.display.scaleY=this.scale-.1,this.addChild(this.drawDragonbon.display),this.drawDragonbon.addEventListener(dragonBones.AnimationEvent.START,this.startDrawDragonbon,this),this.drawDragonbon.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.completeDrawDragonbon,this),this.drawDragonbon.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,this.frame_event_draw,this)),this.drawDragonbon.display.x=.5*this.stageW,this.drawDragonbon.display.y=this.stageH+550,util.playSound("bui_mp3",function(){Global.soundMc.visible=!1}),setTimeout(function(){setTimeout(function(){t.drawDragonbon.animation.gotoAndPlay("newAnimation")},500);var e=egret.Tween.get(t.drawDragonbon.display,{loop:!1});e.to({y:t.stageH-200},300),e.wait(200),e.to({y:t.drawDragonbon.display.y+30},1e3)},500)},e.prototype.startDrawDragonbon=function(t){},e.prototype.completeDrawDragonbon=function(t){},e.prototype.frame_event_draw=function(t){if("half"==t.frameLabel){if(console.log(this.countGan),0==this.countDraw){var e;1==this.itemCount&&(e=util.createBitmapByName("demoR"+Global.level+"_png")),2==this.itemCount&&(e=util.createBitmapByName("demoL"+Global.level+"_png")),3==this.itemCount&&(e=util.createBitmapByName("testR"+Global.level+"_png")),util.setCneter(e),util.setScale(e,this.scale,this.scale),util.setPosition(e,this.choose.x,this.choose.y),this.addChildAt(e,this.getChildIndex(this.choose)),this.removeChild(this.choose),this.choose=e,this.choose.alpha=.5}1==this.countDraw&&(this.choose.alpha=.6),2==this.countDraw&&(this.choose.alpha=.7),3==this.countDraw&&(this.choose.alpha=.8),this.countDraw++,4==this.countDraw&&(this.choose.alpha=1,this.drawDragonbon.display.visible=!1,this.drawDragonbon.animation.stop(),this.chooseUpAnimate())}},e.prototype.replayFun=function(){var t=this;this.itemCount=1,this.targetConNew=new egret.DisplayObjectContainer;var e=util.createBitmapByName("paper_png");util.setCneter(e);var i;i=1==this.itemCount||2==this.itemCount?util.createBitmapByName("demoR"+Global.level+"_png"):util.createBitmapByName("testR"+Global.level+"_png"),this.socks_png=i,util.setCneter(this.socks_png),i.rotation=45;var o=util.createBitmapByName("shadow"+Global.level+"_png");this.socksShadow_png=o,util.setCneter(this.socksShadow_png),o.rotation=45,o.visible=!1,this.targetConNew.addChild(e),this.targetConNew.addChild(o),this.targetConNew.addChild(i),util.setPosition(this.targetConNew,this.targetCon.x,this.targetCon.y),util.setScale(this.targetConNew,this.scale,this.scale),this.addChildAt(this.targetConNew,this.getChildIndex(this.targetCon));var a=this.ballLeft.x,n=this.ballLeft.y,s=this.ballRight.x,r=this.ballRight.y;this.ballLeft.x=-100,this.ballRight.x=-100,this.ballLeft.y=n+100,this.ballRight.y=r-200,this.ballLeft.visible=this.ballRight.visible=!0;var l=egret.Tween.get(this.ballLeft,{loop:!1});l.to({alpha:1,rotation:260,x:a,y:n},1e3);var h=egret.Tween.get(this.ballRight,{loop:!1});h.to({alpha:1,rotation:260,x:s,y:r},1e3);var c=egret.Tween.get(this.targetCon);util.playSound("paper_mp3",function(){Global.soundMc.visible=!1}),c.to({rotation:90,x:-400,y:this.targetCon.y+300},900),c.wait(1e3),c.call(function(){t.removeChild(t.targetCon),t.targetCon=t.targetConNew;t.getChildIndex(t.chooseLeft),t.getChildIndex(t.chooseRight);t.chooseRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.chooseLeftHideAnimate,t),t.chooseLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.chooseRightHideAnimate,t),1==t.itemCount||2==t.itemCount?t.chooseLeft=util.createBitmapByName("demoLL"+Global.level+"_png"):t.chooseLeft=util.createBitmapByName("testLL"+Global.level+"_png"),util.setScale(t.chooseLeft,t.scale,t.scale),util.setCneter(t.chooseLeft),t.addChildAt(t.chooseLeft,5),util.setPosition(t.chooseLeft,.5*t.stageW-t.dis,t.stageH-300),1==t.itemCount||2==t.itemCount?t.chooseRight=util.createBitmapByName("demoRR"+Global.level+"_png"):t.chooseRight=util.createBitmapByName("testRR"+Global.level+"_png"),util.setScale(t.chooseRight,t.scale,t.scale),util.setCneter(t.chooseRight),t.addChildAt(t.chooseRight,5),util.setPosition(t.chooseRight,.5*t.stageW+t.dis,t.stageH-300),t.ballLeft.visible=!0,t.ballRight.visible=!0,t.chooseLeft.visible=!1,t.chooseRight.visible=!1,t.startAnimate()})},e.prototype.changeItem=function(){var t=this;this.itemCount++,this.targetConNew=new egret.DisplayObjectContainer;var e=util.createBitmapByName("paper_png");util.setCneter(e);var i;i=1==this.itemCount||2==this.itemCount?util.createBitmapByName("demoR"+Global.level+"_png"):util.createBitmapByName("testR"+Global.level+"_png"),this.socks_png=i,util.setCneter(this.socks_png),i.rotation=45;var o=util.createBitmapByName("shadow"+Global.level+"_png");this.socksShadow_png=o,util.setCneter(this.socksShadow_png),o.rotation=45,o.visible=!1,this.targetConNew.addChild(e),this.targetConNew.addChild(o),this.targetConNew.addChild(i),util.setPosition(this.targetConNew,this.targetCon.x,this.targetCon.y),util.setScale(this.targetConNew,this.scale,this.scale),this.addChildAt(this.targetConNew,this.getChildIndex(this.targetCon));var a=this.ballLeft.x,n=this.ballLeft.y,s=this.ballRight.x,r=this.ballRight.y;this.ballLeft.x=-100,this.ballRight.x=-100,this.ballLeft.y=n+100,this.ballRight.y=r-200,this.ballLeft.visible=this.ballRight.visible=!0;var l=egret.Tween.get(this.ballLeft,{loop:!1});l.to({alpha:1,rotation:260,x:a,y:n},1e3);var h=egret.Tween.get(this.ballRight,{loop:!1});h.to({alpha:1,rotation:260,x:s,y:r},1e3);var c=egret.Tween.get(this.targetCon);util.playSound("paper_mp3",function(){Global.soundMc.visible=!1}),c.to({rotation:90,x:-400,y:this.targetCon.y+300},900),c.wait(1e3),c.call(function(){t.removeChild(t.targetCon),t.targetCon=t.targetConNew;t.getChildIndex(t.chooseLeft),t.getChildIndex(t.chooseRight);t.chooseRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.chooseLeftHideAnimate,t),t.chooseLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.chooseRightHideAnimate,t),1==t.itemCount||2==t.itemCount?t.chooseLeft=util.createBitmapByName("demoLL"+Global.level+"_png"):t.chooseLeft=util.createBitmapByName("testLL"+Global.level+"_png"),util.setScale(t.chooseLeft,t.scale,t.scale),util.setCneter(t.chooseLeft),t.addChildAt(t.chooseLeft,5),util.setPosition(t.chooseLeft,.5*t.stageW-t.dis,t.stageH-300),1==t.itemCount||2==t.itemCount?t.chooseRight=util.createBitmapByName("demoRR"+Global.level+"_png"):t.chooseRight=util.createBitmapByName("testRR"+Global.level+"_png"),util.setScale(t.chooseRight,t.scale,t.scale),util.setCneter(t.chooseRight),t.addChildAt(t.chooseRight,5),util.setPosition(t.chooseRight,.5*t.stageW+t.dis,t.stageH-300),t.ballLeft.visible=!0,t.ballRight.visible=!0,t.chooseLeft.visible=!1,t.chooseRight.visible=!1,t.startAnimate()})},e}(egret.DisplayObjectContainer);__reflect(Demo1Item.prototype,"Demo1Item");var LetterMc=function(t){function e(e,i,o){var a=t.call(this)||this;return a.addEventListener(egret.Event.ADDED_TO_STAGE,a.onAddToStage,a),a}return __extends(e,t),e.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)},e}(egret.Sprite);__reflect(LetterMc.prototype,"LetterMc");